<!-- Page Header -->
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2><i class="fa fa-check-square-o"></i> Review Requests</h2>
        <ol class="breadcrumb">
            <li class="active">
                <strong>Here you can find all the requests that have been submitted. You can view their information, approve, or deny them.</strong>
            </li>
        </ol>
    </div>
</div>
<!-- End Page Header -->
<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-xs-12">
            <div class="col-md-12 well white-bg animated fadeInRight">
                <h2 class="font-bold m-b-xs text-center">
                    My Requests
                </h2>
                <hr>
                <!-- No Requests -->
                <h3 class="text-danger text-center" *ngIf="requests.length == 0">You have not made any requests.</h3>
                
                <div class="table-responsive extra-margin-top" *ngIf="requests.length > 0">
                    <!-- Request Table -->
                    <table class="table table-striped">
                        <!-- Request Table Headers -->
                        <thead>
                            <tr>
                                <th>Request Type</th>
                                <th>Request ID</th>
                                <th>Requester</th>
                                <th>Creation Date</th>
                                <th>Status</th>
                                <th>View PDF</th>
                                <th>Do Task</th>
                            </tr>
                        </thead>
                        <!-- End Request Table Headers -->
                        <!-- Request Table Body-->
                        <tbody>
                            <tr *ngIf="requests.length > 0 && requests.length >= requestOffsetLeft  + 0">
                                <td>X-Team Job Application</td>
                                <td>{{requests[requestOffsetLeft -1 + 0].id_request}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 0].first_name}} {{requests[requestOffsetLeft -1 + 0].last_name}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 0].creation_date.substring(0,10)}} at {{requests[requestOffsetLeft -1 + 0].creation_date.substring(11,16)}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 0].status}}</td>
                                <td><button type="button" class="btn btn-sm btn-info" (click)="generatePdf(requests[requestOffsetLeft -1 + 0].first_name, requests[requestOffsetLeft -1 + 0].last_name, requests[requestOffsetLeft -1 + 0].profession, requests[requestOffsetLeft -1 + 0].motto, requests[requestOffsetLeft -1 + 0].question1, requests[requestOffsetLeft -1 + 0].question2); view_request_pdf_modal.show()"> View</button></td>
                                <td><button [disabled]="requests[requestOffsetLeft -1 + 0].status!='Pending'" type="button" class="btn btn-sm btn-success" (click)="setCurrentRequest(requestOffsetLeft -1 + 0);do_request_pdf_modal.show()"> Do</button></td>
                            </tr>
                            <tr *ngIf="requests.length > 0 && requests.length >= requestOffsetLeft  + 1">
                                <td>X-Team Job Application</td>
                                <td>{{requests[requestOffsetLeft -1 + 1].id_request}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 1].first_name}} {{requests[requestOffsetLeft -1 + 1].last_name}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 1].creation_date.substring(0,10)}} at {{requests[requestOffsetLeft -1 + 1].creation_date.substring(11,16)}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 1].status}}</td>
                                <td><button type="button" class="btn btn-sm btn-info" (click)="generatePdf(requests[requestOffsetLeft -1 + 1].first_name, requests[requestOffsetLeft -1 + 1].last_name, requests[requestOffsetLeft -1 + 1].profession, requests[requestOffsetLeft -1 + 1].motto, requests[requestOffsetLeft -1 + 1].question1, requests[requestOffsetLeft -1 + 1].question2); view_request_pdf_modal.show()"> View</button></td>
                                <td><button [disabled]="requests[requestOffsetLeft -1 + 1].status!='Pending'" type="button" class="btn btn-sm btn-success" (click)="setCurrentRequest(requestOffsetLeft -1 + 1);do_request_pdf_modal.show()"> Do</button></td>
                            </tr>
                            <tr *ngIf="requests.length > 0 && requests.length >= requestOffsetLeft  + 2">
                                <td>X-Team Job Application</td>
                                <td>{{requests[requestOffsetLeft -1 + 2].id_request}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 2].first_name}} {{requests[requestOffsetLeft -1 + 2].last_name}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 2].creation_date.substring(0,10)}} at {{requests[requestOffsetLeft -1 + 2].creation_date.substring(11,16)}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 2].status}}</td>
                                <td><button type="button" class="btn btn-sm btn-info" (click)="generatePdf(requests[requestOffsetLeft -1 + 2].first_name, requests[requestOffsetLeft -1 + 2].last_name, requests[requestOffsetLeft -1 + 2].profession, requests[requestOffsetLeft -1 + 2].motto, requests[requestOffsetLeft -1 + 2].question1, requests[requestOffsetLeft -1 + 2].question2); view_request_pdf_modal.show()"> View</button></td>
                                <td><button [disabled]="requests[requestOffsetLeft -1 + 2].status!='Pending'" type="button" class="btn btn-sm btn-success" (click)="setCurrentRequest(requestOffsetLeft -1 + 2);do_request_pdf_modal.show()"> Do</button></td>
                            </tr>
                            <tr *ngIf="requests.length > 0 && requests.length >= requestOffsetLeft  + 3">
                                <td>X-Team Job Application</td>
                                <td>{{requests[requestOffsetLeft -1 + 3].id_request}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 3].first_name}} {{requests[requestOffsetLeft -1 + 3].last_name}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 3].creation_date.substring(0,10)}} at {{requests[requestOffsetLeft -1 + 3].creation_date.substring(11,16)}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 3].status}}</td>
                                <td><button type="button" class="btn btn-sm btn-info" (click)="generatePdf(requests[requestOffsetLeft -1 + 3].first_name, requests[requestOffsetLeft -1 + 3].last_name, requests[requestOffsetLeft -1 + 3].profession, requests[requestOffsetLeft -1 + 3].motto, requests[requestOffsetLeft -1 + 3].question1, requests[requestOffsetLeft -1 + 3].question2); view_request_pdf_modal.show()"> View</button></td>
                                <td><button [disabled]="requests[requestOffsetLeft -1 + 3].status!='Pending'" type="button" class="btn btn-sm btn-success" (click)="setCurrentRequest(requestOffsetLeft -1 + 3);do_request_pdf_modal.show()"> Do</button></td>
                            </tr>
                            <tr *ngIf="requests.length > 0 && requests.length >= requestOffsetLeft  + 4">
                                <td>X-Team Job Application</td>
                                <td>{{requests[requestOffsetLeft -1 + 4].id_request}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 4].first_name}} {{requests[requestOffsetLeft -1 + 4].last_name}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 4].creation_date.substring(0,10)}} at {{requests[requestOffsetLeft -1 + 4].creation_date.substring(11,16)}}</td>
                                <td>{{requests[requestOffsetLeft -1 + 4].status}}</td>
                                <td><button type="button" class="btn btn-sm btn-info" (click)="generatePdf(requests[requestOffsetLeft -1 + 4].first_name, requests[requestOffsetLeft -1 + 4].last_name, requests[requestOffsetLeft -1 + 4].profession, requests[requestOffsetLeft -1 + 4].motto, requests[requestOffsetLeft -1 + 4].question1, requests[requestOffsetLeft -1 + 4].question2); view_request_pdf_modal.show()"> View</button></td>
                                <td><button [disabled]="requests[requestOffsetLeft -1 + 4].status!='Pending'" type="button" class="btn btn-sm btn-success" (click)="setCurrentRequest(requestOffsetLeft -1 + 4);do_request_pdf_modal.show()"> Do</button></td>
                            </tr>
                        </tbody>
                        <!-- End Request Table Body-->
                        <div class="feed-footer">
                            <button class="btn btn-primary btn-sm" (click)="updateRequestsGoLeft()" [disabled]="requestOffsetLeft == 0 || requestOffsetLeft==1"><i class="fa fa-arrow-left"></i></button>
                            <button class="btn btn-primary btn-sm" (click)="updateRequestsGoRight()" [disabled]="requests.length<=requestOffsetRight"><i class="fa fa-arrow-right"></i></button>

                            <strong class="showing"> Showing {{requestOffsetLeft}} - {{requestOffsetRight}}  of a total of {{requests.length}}</strong>
                        </div>
                    </table>
                    <!-- End Request Table -->
                </div>
            </div>
        </div>
    </div>
    <!-- View Request Pdf Modal-->
    <div bsModal #view_request_pdf_modal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" [config]="{backdrop: 'static'}">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close pull-right" (click)="view_request_pdf_modal.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h2 class="text-center"><strong>Request PDF</strong></h2>
                    <!-- PDF Frame-->
                    <iframe type="application/pdf" [src]="" class="myPdf" id="pdfFrame">
                        Your browser is too old to view pdf files...
                    </iframe>
                    <!-- End PDF Frame-->
                    <div class="text-center">
                        <a (click)="view_request_pdf_modal.hide()" class="btn btn-warning custom-wizard-button"><i class="fa fa-arrow-left"></i> Back</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End View Request Pdf Modal-->
    <!-- Do Task Request Pdf Modal-->
    <div bsModal #do_request_pdf_modal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" [config]="{backdrop: 'static'}">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close pull-right" (click)="do_request_pdf_modal.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h2 class="text-center"><strong>Approve/Deny X-Team Job Application</strong></h2>
                    <h3 class="text-center extra-padding-top">As an X-Team Ambassador, you must review each request and make a decision accordingly. The user will be notified of their request resolution, so their fate is at your hands.</h3>

                    <div class="row">
                        <div class = "col-sm-4">
                            <button (click)="do_request_pdf_modal.hide()" class="btn btn-warning custom-wizard-button logo"><i class="fa fa-close"></i> Cancel</button>
                        </div>
                        <div class = "col-sm-4">
                            <button (click)="deny()" class="btn btn-danger custom-wizard-button logo"><i class="fa fa-thumbs-down"></i> Deny</button>
                        </div>
                        <div class = "col-sm-4">
                            <button (click)="approve()" class="btn btn-success custom-wizard-button logo"><i class="fa fa-thumbs-up"></i> Approve</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Do Task Request Pdf Modal-->
</div>